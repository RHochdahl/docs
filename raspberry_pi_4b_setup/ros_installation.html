

<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>ROS Installation &mdash; HippoCampusDocs  documentation</title>
  

  
  <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="../_static/sphinx_tabs/semantic-ui-2.4.1/segment.min.css" type="text/css" />
  <link rel="stylesheet" href="../_static/sphinx_tabs/semantic-ui-2.4.1/menu.min.css" type="text/css" />
  <link rel="stylesheet" href="../_static/sphinx_tabs/semantic-ui-2.4.1/tab.min.css" type="text/css" />
  <link rel="stylesheet" href="../_static/sphinx_tabs/tabs.css" type="text/css" />

  
  
  
  

  
  <!--[if lt IE 9]>
    <script src="../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="../" src="../_static/documentation_options.js"></script>
        <script src="../_static/jquery.js"></script>
        <script src="../_static/underscore.js"></script>
        <script src="../_static/doctools.js"></script>
        <script src="../_static/language_data.js"></script>
        <script src="../_static/sphinx_tabs/semantic-ui-2.4.1/tab.min.js"></script>
        <script src="../_static/sphinx_tabs/tabs.js"></script>
    
    <script type="text/javascript" src="../_static/js/theme.js"></script>

    
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="ROS Network Setup" href="ros_network_setup.html" />
    <link rel="prev" title="Ethernet Configuration" href="ethernet_configuration.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="../index.html" class="icon icon-home" alt="Documentation Home"> HippoCampusDocs
          

          
          </a>

          
            
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        
        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <p class="caption"><span class="caption-text">Contents:</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../getting_started.html">Getting Started</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../raspberry_pi_4b_setup.html">Raspberry Pi 4B Setup</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="pre_boot_configuration.html">Pre-Boot Configuration</a></li>
<li class="toctree-l2"><a class="reference internal" href="system_configuration.html">System Configuration</a></li>
<li class="toctree-l2"><a class="reference internal" href="ethernet_configuration.html">Ethernet Configuration</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="#">ROS Installation</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#workspace-concept">Workspace Concept</a></li>
<li class="toctree-l3"><a class="reference internal" href="#preparations">Preparations</a></li>
<li class="toctree-l3"><a class="reference internal" href="#setup-workspace">Setup Workspace</a></li>
<li class="toctree-l3"><a class="reference internal" href="#build-the-code">Build the Code</a></li>
<li class="toctree-l3"><a class="reference internal" href="#initialize-user-workspace">Initialize User Workspace</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="ros_network_setup.html">ROS Network Setup</a></li>
<li class="toctree-l2"><a class="reference internal" href="install_ros_packages.html">Install ROS Packages</a></li>
<li class="toctree-l2"><a class="reference internal" href="mavros.html">MAVROS</a></li>
<li class="toctree-l2"><a class="reference internal" href="camera.html">Camera</a></li>
<li class="toctree-l2"><a class="reference internal" href="uart_configuration.html">UART Configuration</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../bluerov.html">BlueROV</a></li>
<li class="toctree-l1"><a class="reference internal" href="../gantry.html">Gantry</a></li>
<li class="toctree-l1"><a class="reference internal" href="../contributing.html">Contributing</a></li>
<li class="toctree-l1"><a class="reference internal" href="../workflow_and_style_guide.html">Workflow and Style Guide</a></li>
</ul>

            
          
        </div>
        
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">HippoCampusDocs</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
           















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../index.html" class="icon icon-home"></a> &raquo;</li>
        
          <li><a href="../raspberry_pi_4b_setup.html">Raspberry Pi 4B Setup</a> &raquo;</li>
        
      <li>ROS Installation</li>
    
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            
              <a href="https://github.com/HippoCampusRobotics/docs/blob/master/raspberry_pi_4b_setup/ros_installation.rst" class="fa fa-github"> Edit on GitHub</a>
            
          
        
      </li>
    
    <li class="wy-breadcrumbs-aside"><a href="https://hippocampusrobotics.github.io/" class="fa fa-github"> Project Page </a></li>

  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="ros-installation">
<h1>ROS Installation<a class="headerlink" href="#ros-installation" title="Permalink to this headline">¶</a></h1>
<p>In general you can follow the official instruction in the <a class="reference external" href="http://wiki.ros.org/ROSberryPi/Installing%20ROS%20Melodic%20on%20the%20Raspberry%20Pi">ROS wiki</a> to install ROS under Raspbian Buster on the Raspberry Pi. But the following instructions will use <code class="code docutils literal notranslate"><span class="pre">catkin</span></code> instead of <code class="code docutils literal notranslate"><span class="pre">catkin_make</span></code> or <code class="code docutils literal notranslate"><span class="pre">catkin_make_isolated</span></code>.</p>
<div class="section" id="workspace-concept">
<h2>Workspace Concept<a class="headerlink" href="#workspace-concept" title="Permalink to this headline">¶</a></h2>
<p>Since ROS is not availabe as binary packages for Raspbian, all the ROS packages have to be installed from source. To not flood our <cite>normal</cite> Catkin workspace, we create two seperate workspaces.</p>
<dl class="simple">
<dt>~/ros_catkin_ws</dt><dd><p>This is the workspace, where the source code of the packages we just want to install live. We will configure Catkin to install these packages in <code class="file docutils literal notranslate"><span class="pre">/opt/ros/melodic</span></code>. This is the directory, where the installation via prebuilt packages would also create its files. It is not very likely you get in touch with this workspace often after the initial installation.</p>
</dd>
<dt>~/catkin_ws</dt><dd><p>Your normal workspace directory. All the Hippocampus specific packages should be in here. Also other packages that you want to modify should be in this workspace.</p>
</dd>
</dl>
</div>
<div class="section" id="preparations">
<h2>Preparations<a class="headerlink" href="#preparations" title="Permalink to this headline">¶</a></h2>
<ol class="arabic">
<li><p>Adding keys</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>sudo sh -c <span class="s1">&#39;echo &quot;deb http://packages.ros.org/ros/ubuntu $(lsb_release -sc) main&quot; &gt; /etc/apt/sources.list.d/ros-latest.list&#39;</span>
</pre></div>
</div>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>sudo apt-key adv --keyserver hkp://ha.pool.sks-keyservers.net:80 --recv-key C1CF6E31E6BADE8868B172B4F42ED6FBAB17C654
</pre></div>
</div>
</li>
<li><p>Update source lists</p>
<div class="highlight-sh notranslate"><div class="highlight"><pre><span></span>sudo apt update
</pre></div>
</div>
</li>
<li><p>Install dependencies</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>sudo apt install -y python-rosdep python-rosinstall-generator python-wstool python-rosinstall build-essential cmake python-catkin-tools
</pre></div>
</div>
</li>
<li><p>Initialize rosdep</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>sudo rosdep init
</pre></div>
</div>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>rosdep update
</pre></div>
</div>
</li>
</ol>
</div>
<div class="section" id="setup-workspace">
<h2>Setup Workspace<a class="headerlink" href="#setup-workspace" title="Permalink to this headline">¶</a></h2>
<ol class="arabic">
<li><p>Create workspace</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>mkdir ~/ros_catkin_ws <span class="o">&amp;&amp;</span> <span class="nb">cd</span> ~/ros_catkin_ws
</pre></div>
</div>
</li>
<li><p>Fetch source code</p>
<div class="admonition attention">
<p class="admonition-title">Attention</p>
<p>The following commands will fetch the sources for the <code class="code docutils literal notranslate"><span class="pre">ros_comm</span></code> meta package and the <code class="code docutils literal notranslate"><span class="pre">perception</span></code> meta package. If you do not need all of them or if you need even more packages feel free to modify the following commands accordingly. Building unnecessary packages might be a waste of time.</p>
</div>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>rosinstall_generator ros_comm perception --rosdistro melodic --deps --wet-only --tar &gt; melodic-ros_comm-perception-wet.rosinstall
</pre></div>
</div>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>wstool init src melodic-ros_comm-perception-wet.rosinstall
</pre></div>
</div>
</li>
<li><p>Resolve dependencies</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>rosdep install -y --from-paths src --ignore-src --rosdistro melodic -r --os<span class="o">=</span>debian:buster
</pre></div>
</div>
</li>
</ol>
</div>
<div class="section" id="build-the-code">
<h2>Build the Code<a class="headerlink" href="#build-the-code" title="Permalink to this headline">¶</a></h2>
<ol class="arabic">
<li><p>Set the install space</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>catkin config --install-space /opt/ros/melodic
</pre></div>
</div>
</li>
<li><p>Use the <code class="code docutils literal notranslate"><span class="pre">install</span></code> configuration instead of <code class="code docutils literal notranslate"><span class="pre">devel</span></code></p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>catkin config --install
</pre></div>
</div>
</li>
<li><p>Start the build process</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Depending on your package configuration the next command may take some time, i.e. a few hours if you want to build many packages.</p>
</div>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>sudo catkin build --cmake-args -DCMAKE_BUILD_TYPE<span class="o">=</span>Release
</pre></div>
</div>
</li>
</ol>
</div>
<div class="section" id="initialize-user-workspace">
<h2>Initialize User Workspace<a class="headerlink" href="#initialize-user-workspace" title="Permalink to this headline">¶</a></h2>
<ol class="arabic">
<li><p>Source your ROS installation</p>
<div class="sphinx-tabs docutils container">
<div class="ui top attached tabular menu sphinx-menu docutils container">
<div class="active item sphinx-data-tab-enNo docutils container">
<div class="docutils container">
<p>zsh</p>
</div>
</div>
<div class="item sphinx-data-tab-YmFzaA== docutils container">
<div class="docutils container">
<p>bash</p>
</div>
</div>
</div>
<div class="ui bottom attached sphinx-tab tab segment code-tab sphinx-data-tab-enNo active docutils container">
<div class="highlight-sh notranslate"><div class="highlight"><pre><span></span><span class="nb">source</span> /opt/ros/melodic/setup.zsh
</pre></div>
</div>
</div>
<div class="ui bottom attached sphinx-tab tab segment code-tab sphinx-data-tab-YmFzaA== docutils container">
<div class="highlight-sh notranslate"><div class="highlight"><pre><span></span><span class="nb">source</span> /opt/ros/melodic/setup.bash
</pre></div>
</div>
</div>
</div>
</li>
<li><p>Create workspace</p>
<div class="highlight-sh notranslate"><div class="highlight"><pre><span></span>mkdir -p ~/catkin_ws/src <span class="o">&amp;&amp;</span> <span class="nb">cd</span> ~/catkin_ws
</pre></div>
</div>
</li>
<li><p>Initialize workspace</p>
<div class="highlight-sh notranslate"><div class="highlight"><pre><span></span>catkin init
</pre></div>
</div>
</li>
<li><p>Build empty workspace</p>
<div class="highlight-sh notranslate"><div class="highlight"><pre><span></span>catkin build
</pre></div>
</div>
</li>
</ol>
<p>This command created the devel directory inside your catkin workspace. To source your workspace you can either source it manually for each terminal session by executing <code class="code docutils literal notranslate"><span class="pre">source</span> <span class="pre">~/catkin_ws/devel/setup.bash</span></code>. A better way to handle this automatically is to append this command to your <code class="file docutils literal notranslate"><span class="pre">.bashrc</span></code> file.</p>
<div class="sphinx-tabs docutils container">
<div class="ui top attached tabular menu sphinx-menu docutils container">
<div class="active item sphinx-data-tab-enNo docutils container">
<div class="docutils container">
<p>zsh</p>
</div>
</div>
<div class="item sphinx-data-tab-YmFzaA== docutils container">
<div class="docutils container">
<p>bash</p>
</div>
</div>
</div>
<div class="ui bottom attached sphinx-tab tab segment code-tab sphinx-data-tab-enNo active docutils container">
<div class="highlight-sh notranslate"><div class="highlight"><pre><span></span><span class="nb">echo</span> <span class="s1">&#39;source $HOME/catkin_ws/devel/setup.zsh&#39;</span> &gt;&gt; ~/.zshrc
</pre></div>
</div>
</div>
<div class="ui bottom attached sphinx-tab tab segment code-tab sphinx-data-tab-YmFzaA== docutils container">
<div class="highlight-sh notranslate"><div class="highlight"><pre><span></span><span class="nb">echo</span> <span class="s1">&#39;source $HOME/catkin_ws/devel/setup.bash&#39;</span> &gt;&gt; ~/.bashrc
</pre></div>
</div>
</div>
</div>
<p>For this change of the <code class="file docutils literal notranslate"><span class="pre">.bashrc</span></code> to take effect immediately execute:</p>
<div class="sphinx-tabs docutils container">
<div class="ui top attached tabular menu sphinx-menu docutils container">
<div class="active item sphinx-data-tab-enNo docutils container">
<div class="docutils container">
<p>zsh</p>
</div>
</div>
<div class="item sphinx-data-tab-YmFzaA== docutils container">
<div class="docutils container">
<p>bash</p>
</div>
</div>
</div>
<div class="ui bottom attached sphinx-tab tab segment code-tab sphinx-data-tab-enNo active docutils container">
<div class="highlight-sh notranslate"><div class="highlight"><pre><span></span><span class="nb">source</span> ~/.zshrc
</pre></div>
</div>
</div>
<div class="ui bottom attached sphinx-tab tab segment code-tab sphinx-data-tab-YmFzaA== docutils container">
<div class="highlight-sh notranslate"><div class="highlight"><pre><span></span><span class="nb">source</span> ~/.bashrc
</pre></div>
</div>
</div>
</div>
</div>
</div>


           </div>
           
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="ros_network_setup.html" class="btn btn-neutral float-right" title="ROS Network Setup" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="ethernet_configuration.html" class="btn btn-neutral float-left" title="Ethernet Configuration" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        
        &copy; Copyright 2020, Thies Lennart Alff

    </p>
  </div>
    
    
    
    Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a
    
    <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a>
    
    provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  

  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>